var B=function(p){const{root:s,fn:A,fns:$,deps:_,ctx:v}=p;var h,n,d,m,w,L,y=[];function u(l){return new Proxy({},{get(k,f){if(L){const c=m.indexOf(f);if(c>=0)return l[c]}return f===m?l:m.includes(f)?l[f]:f==w?d.indexOf(l):v[f]}})}function I(l,k,f,c){const a=V({fns:$,dom:s.cloneNode(!0)},u(l),_,v);y[c?"unshift":"push"](a),a.before(c||h),v.oninsert?.call(v,a.$el,l,{index:k,is_repaint:!!f,is_first:!k,is_last:k==d.length-1,items:d})}function O(){y.forEach((l)=>l.unmount()),y=[],d.forEach(I)}function N(l){const{unshift:k,splice:f,push:c,sort:a,reverse:e}=l;return Object.assign(l,{push(t){c.call(d,t),I(t,d.length-1)},unshift(t){k.call(d,t),I(t,0,null,y[0].$el)},sort(t){a.call(d,t),O()},reverse(){e.call(d),O()},splice(t,i){y.slice(t,t+i).forEach((r)=>r.unmount()),y.splice(t,i),f.call(d,t,i)},shift(){l.splice(0,1)},pop(){l.splice(l.length-1,1)},remove(t){const i=d.indexOf(t);if(i>=0)l.splice(i,1)}})}function P(){var l;if([m,l=[],w,L]=A(v),d){if(l!==n)d=N(l),O(),n=l;return y.forEach((k)=>k.update())}if(l){const k=s.parentElement;h=new Text(""),k.insertBefore(h,s),k.removeChild(s),d=N(l),l.forEach(I),n=l}}return{update:P}},W=function(p){const{root:s,fn:A,fns:$,deps:_,ctx:v}=p,h=[];var n=s,d,m;function w(y,u){p.processAttrs(y);const I=V({fns:$,dom:y},v,_,v);h.push(I),I.fn=u}w(s,A);while(n=n.nextElementSibling){const y=n.getAttribute(":else-if");if(y)w(n,$[y]),n.removeAttribute(":else-if");else if(n.hasAttribute(":else"))w(n,()=>!0),n.removeAttribute(":else");else{m=n;break}}function L(){if(!d){const u=s.parentElement;d=new Text(""),u.insertBefore(d,s)}const y=h.find((u)=>u.fn(v));h.forEach((u)=>u==y?u.before(d):u.unmount())}return{update:L,next:m}},V=function(p,s={},A=[],$={}){const{Impl:_,tmpl:v,fns:h=[],dom:n,inner:d}=p,m=[];function w(e){const t=e.nodeType;if(t==3){const[i,r]=/:(\d+):/.exec(e.textContent.trim())||[],o=h[r];if(o)m.push((b)=>e.textContent=g(o(a)))}if(t==1){for(let b in F){const x=h[e.getAttribute(b)];if(b==":if"&&x&&e.getAttribute(":for"))if(x(a))continue;else e.removeAttribute(":for");if(x){e.removeAttribute(b);const j=F[b]({root:e,fn:x,fns:h,deps:A,ctx:a,processAttrs:L});return m.push(j.update),j}}const i=e.tagName.toLowerCase(),r=e.nextSibling;if(d&&i=="slot")return d.replace(e),{next:r};const o=A.find((b)=>b.name==i);if(o){if(e.firstChild){const j=document.createElement("_");j.append(...e.childNodes),o.inner=V({fns:h,dom:j},a,A)}const b=P(e),x=V(o,a,A,b).mount(e);if(n?.tagName.toLowerCase()==o.name)c.$el=x.$el;return m.push((j)=>l(x.$el,b)),c.$refs[e.getAttribute("ref")||i]=x.impl,{next:r}}else L(e),I(e,w)}}function L(e){for(let t of[...e.attributes])u(e,t.name,t.value)}function y(e,t,i){if(e.getAttribute(t)!==i)e.setAttribute(t,i)}function u(e,t,i){if(t=="ref"||t=="name")c.$refs[i]=e;const r=h[i];if(!r)return;const o=t.slice(1),b=t[0];if(":@$".includes(b))e.removeAttribute(t);if(o=="attr")return m.push((x)=>{for(let[j,C]of Object.entries(r(a)))y(e,j,C===!0?"":C)});if(b==":"){if(o!="bind")m.push((x)=>{let j=r(a);y(e,o,g(j))})}else if(b=="@")e[`on${o}`]=(x)=>{r.call(a,a,x),($?.update||k)()};else if(b=="$")m.push((x)=>{if(!(e[o]=!!r(a)))e.removeAttribute(o)});if(o=="html")m.push((x)=>e.innerHTML=r(a))}function I(e,t){let i=e.firstChild;while(i)i=t(i)?.next||i.nextSibling}function O(e,t){const i=e.getAttribute(":"+t),r=h[i];return r?r(a):a[i]||e.getAttribute(t)||e[t]||void 0}function N(e){const t={};for(let i of[...e.attributes]){const r=i.name.replace(":",""),o=O(e,r);if(!R.includes(r)&&typeof o!="object")t[r]=o==null?!0:o}return t}function P(e){return e.$attrs=N(e),new Proxy(e,{get(t,i){return O(e,i)}})}function l(e,t){const i=Z(O(e,"class")||[],t.class);if(i[0])e.className=g(i," ");const{id:r,style:o}=t;if(o&&o.x!="")e.style=g(o);if(r)e.id=g(r)}function k(e){if(e)Object.assign(f,e);return m.map((t)=>t()),f.updated?.call(a,a),c}let f={};const c={update:k,$el:n,get root(){return c.$el},$refs:{},$parent:$,impl:f,mountChild(e,t,i){const r=A.find((o)=>o.name==e);if(r)V(r,i,A,a).mount(t)},mount(e){const t=n||(c.$el=E(v));let i=e.querySelector("script");if(i)Object.assign(s,JSON.parse(i.textContent)),e.insertAdjacentElement("afterend",i);if(_)f=c.impl=new _(a),f.mountChild=c.mountChild,f.$refs=c.$refs,f.update=k;w(t),e.replaceWith(t);for(let r of[...e.attributes])y(t,r.name,r.value);return f.mounted?.call(a,a),k()},append(e){const t=document.createElement("b");return e.append(t),c.mount(t)},replace(e){w(n),e.replaceWith(...n.children),k()},before(e){if(n){if(c.$el=n,!document.body.contains(n))e.before(n);if(!n.walked)w(n),n.walked=1;return k()}},unmount(){try{c.root.remove()}catch(e){}f.unmounted?.call(a,a),k()}},a=new Proxy({},{get(e,t){for(let i of[c,f,s,$,$.bind]){const r=i&&i[t];if(r!=null)return r}},set(e,t,i){if($&&$[t]!==void 0)$[t]=i,$.update();else c[t]=i;return!0}});return c},E=function(p){const s=document.createElement("_");return s.innerHTML=p.trim(),s.firstChild},g=function(p,s=""){return p?.join?p.filter((A)=>A||A===0).join(s).trim().replace(/\s+/g," "):p||""},Z=function(p,s){if(p==s)return[p];if(!p.join)p=[p];if(s&&!s.join)s=[s];return p.concat(s)},F={":if":W,":for":B},R=["class","style","id"];export{V as default,V as createApp};
