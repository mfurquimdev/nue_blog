async function n(a){dispatchEvent(new Event("before:route"));const o=P(await H(a));document.title=t("title",o)?.textContent;const c=t("main"),d=t("main",o);if(c&&d)c.replaceWith(d);else t("body").innerHTML=t("body2",o).innerHTML,t("body").classList=t("body2",o).classList;k(i("style"),i("style",o)).forEach((l)=>t("head").appendChild(l));const e=k(i("link"),i("link",o));S(e,()=>{scrollTo(0,0),dispatchEvent(new Event("route"))})}var r=function(a,o){a.addEventListener("click",(c)=>{const d=c.target.closest("[href]"),e=d?.getAttribute("href"),l=d?.getAttribute("target");if(c.defaultPrevented||c.metaKey||c.ctrlKey||c.shiftKey||c.altKey||!e||e[0]=="#"||e.includes("//")||e.startsWith("mailto:")||l=="_blank")return;if(e!=location.pathname)o(e);c.preventDefault()})},y=function(a,o="selected"){const c=t(`[href="${a}"]`);i("."+o).forEach((d)=>d.classList.remove(o)),c?.classList.add(o)};async function H(a){if(!s[a]){const o=await fetch(a);s[a]=await o.text()}return s[a]}var t=function(a,o=document){return o.querySelector(a)},i=function(a,o=document){return[...o.querySelectorAll(a)]},g=function(a,o){return o.find((c)=>c.getAttribute("href")==a.getAttribute("href"))},k=function(a,o){return a.forEach((c,d)=>c.disabled=!g(c,o)),o.filter((c)=>!g(c,a))},P=function(a){a=a.replace(/<(\/?)body/g,"<$1body2");const o=document.createElement("template");return o.innerHTML=a.trim(),o.content},S=function(a,o){let c=0;!a[0]?o():a.forEach((d,e)=>{f(d.href,()=>{if(++c==a.length)o()})})},f=function(a,o){const c=document.createElement("link");c.rel="stylesheet",c.href=a,t("head").appendChild(c),c.onload=o},p=typeof window=="object";addEventListener("popstate",(a)=>{const{path:o,is_spa:c}=a.state||{};if(o)n(o)});p&&history.pushState({path:location.pathname},0);p&&r(document,(a)=>{n(a),history.pushState({path:a},0,a),y(a)});var s={};export{y as setSelected,r as onclick,n as loadPage};
